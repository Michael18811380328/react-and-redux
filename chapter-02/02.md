# 第二章笔记

知识点：

- 如何划分组件边界
- 组件的数据种类
- 组件的生命周期函数
- React 的核心原理：事件驱动，状态提升，虚拟DOM，DIFF算法等



### 如何划分组件的边界

一个组件只做一件事，分治算法的思路；

当一个组件的功能很复杂，难以管理，需要拆分组件，关键就是确定组件的边界；

确定边界：每个组件可以独立存在；如果两个组件逻辑太紧密，无法清晰定义各自的责任，那么这两个组件不应该被拆开，作为一个组件实现更合理。低耦合高内聚。

划分组件的依据：每一个组件是独立功能的部分。

如果一个组件后期开发时，功能很复杂，那么可以拆分成多个子组件。如果这些子组件功能耦合很大，那么就保持一个组件即可。



### 组件数据

差劲的程序员关心代码，优秀的程序员关心数据结构和他们之间的关系。

使用 React 创建了简单的计数器组件。

第一个组件简单使用了 prop 和 state。组件内部可变的数据作为 state，组件外部不可变的数据是 props。

React 通过 PropTypes 验证数据类型，生产环境下不需要，通过 babel-react-optimise 去掉这部分代码。



### 生命周期函数

根据最新的生命周期函数：看哪些函数是新加入的，哪些是废弃的函数。

不同组件生命周期函数执行关系：当全部子组件的 render 函数执行完成后，全部子组件的 componentDidMount 才一起被调用。

React 可以通过 forceUpdate 强行引发数据绘制（不推荐）

shouldComponentUpdate 对于性能提高很有用。可以通过比较 nextState nextProps this.props, this.state 对比然后更新组件。可以处理父组件重绘，子组件不必要重新渲染的情况。



当组件的层级很复杂时，上层组件的 state 比较多，难以管理，那么就需要 Redux 管理。或者是上层组件组要逐层向下传递，中间的组件没有必要使用到某些 props，这样也造成了组件繁杂，此时也可以考虑 redux。多层级多组件，会造成数据的冗余和重复。

